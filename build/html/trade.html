
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_cn">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>trade module &#8212; BStrade beta v0.7.1 文档</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-trade">
<span id="trade-module"></span><h1>trade module<a class="headerlink" href="#module-trade" title="永久链接至标题">¶</a></h1>
<dl class="class">
<dt id="trade.Trade">
<em class="property">class </em><code class="descclassname">trade.</code><code class="descname">Trade</code><span class="sig-paren">(</span><em>code</em>, <em>klist</em>, <em>hpi</em>, <em>lpi</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="class">
<dt id="trade.Trade.Account">
<em class="property">class </em><code class="descname">Account</code><span class="sig-paren">(</span><em>trade_len</em>, <em>volume=0.0</em>, <em>equity=0.0</em>, <em>cumu_r=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Account"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Account" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>记录交易及账户资产变动情况</p>
<dl class="method">
<dt id="trade.Trade.Account.buy">
<code class="descname">buy</code><span class="sig-paren">(</span><em>typ: str</em>, <em>price: float</em>, <em>buy_idx: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Account.buy"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Account.buy" title="永久链接至目标">¶</a></dt>
<dd><p>定义买入操作
:param typ: 买点级别
:param price: 买入价位
:param buy_idx: 买入操作发生时对应的日K索引
:return: delta_vol，买入手数</p>
</dd></dl>

<dl class="method">
<dt id="trade.Trade.Account.sell">
<code class="descname">sell</code><span class="sig-paren">(</span><em>price</em>, <em>volume</em>, <em>sell_idx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Account.sell"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Account.sell" title="永久链接至目标">¶</a></dt>
<dd><p>定义卖出操作
:param price: 卖出价格
:param volume: 卖出手数
:param sell_idx: 卖出时日K的序号索引</p>
</dd></dl>

<dl class="method">
<dt id="trade.Trade.Account.sum_up">
<code class="descname">sum_up</code><span class="sig-paren">(</span><em>current_p: float</em>, <em>cursor: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Account.sum_up"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Account.sum_up" title="永久链接至目标">¶</a></dt>
<dd><p>当日K结束后更新账户状态
:param current_p: 当前价格，一般指收盘价
:param cursor: 当前日K索引</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trade.Trade.Buy">
<em class="property">class </em><code class="descname">Buy</code><span class="sig-paren">(</span><em>time: str</em>, <em>index: defindex.Kti</em>, <em>typ: int</em>, <em>price: float</em>, <em>account</em>, <em>stop_p: float = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Buy"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Buy" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>定义买点对象相关性质和方法</p>
<dl class="method">
<dt id="trade.Trade.Buy.refresh">
<code class="descname">refresh</code><span class="sig-paren">(</span><em>current_p: float</em>, <em>current_high: float</em>, <em>cursor: int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Buy.refresh"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Buy.refresh" title="永久链接至目标">¶</a></dt>
<dd><p>每个K线出现后，更新买点收益状态
:param current_p: 当前价格
:param current_high: 当前最高价
:param cursor: 刷新价格当日索引</p>
</dd></dl>

<dl class="method">
<dt id="trade.Trade.Buy.register">
<code class="descname">register</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Buy.register"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Buy.register" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="trade.Trade.Buy.reset_stop_p">
<code class="descname">reset_stop_p</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Buy.reset_stop_p"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Buy.reset_stop_p" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="trade.Trade.Buy.sold">
<code class="descname">sold</code><span class="sig-paren">(</span><em>sell_p</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Buy.sold"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Buy.sold" title="永久链接至目标">¶</a></dt>
<dd><p>卖出操作记录：对应卖点对象实例，清仓标记
:param sell_p: 卖点对象实例
:return:</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trade.Trade.LevChg">
<em class="property">class </em><code class="descname">LevChg</code><span class="sig-paren">(</span><em>code</em>, <em>lev</em>, <em>start</em>, <em>ref_t</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.LevChg"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.LevChg" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="trade.Trade.LevChg.init_klist">
<code class="descname">init_klist</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.LevChg.init_klist"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.LevChg.init_klist" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="trade.Trade.LevChg.roll_forward">
<code class="descname">roll_forward</code><span class="sig-paren">(</span><em>lev_higher</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.LevChg.roll_forward"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.LevChg.roll_forward" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="trade.Trade.Sell">
<em class="property">class </em><code class="descname">Sell</code><span class="sig-paren">(</span><em>time</em>, <em>index</em>, <em>typ</em>, <em>volume</em>, <em>price</em>, <em>account</em>, <em>buy_p</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Sell"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Sell" title="永久链接至目标">¶</a></dt>
<dd><p>基类：<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(在 Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>定义卖点对象相关性质和方法</p>
<dl class="method">
<dt id="trade.Trade.Sell.register">
<code class="descname">register</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.Sell.register"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.Sell.register" title="永久链接至目标">¶</a></dt>
<dd><p>卖点操作发生：”通知”账户对象实例记录本次交易，并处理其历史对应买点
:return:</p>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="trade.Trade.buy_in_day">
<code class="descname">buy_in_day</code><span class="sig-paren">(</span><em>l_p</em>, <em>typ</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.buy_in_day"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.buy_in_day" title="永久链接至目标">¶</a></dt>
<dd><p>在日线级别上的买入操作需要满足以下条件
/ 1.30min级别买入失败
/ 2.日线低点被确认当日K收盘
/ 3.确认当日K的最高价距离被确认的低点上涨幅度低于阈值
:param l_p: 最近被确认日线低点索引
:param typ: 卖点类型
:return: 是否发生日线买入操作</p>
</dd></dl>

<dl class="staticmethod">
<dt id="trade.Trade.buy_in_day_s">
<em class="property">static </em><code class="descname">buy_in_day_s</code><span class="sig-paren">(</span><em>pre_low</em>, <em>typ</em>, <em>high</em>, <em>stamp</em>, <em>index</em>, <em>price</em>, <em>account</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.buy_in_day_s"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.buy_in_day_s" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="trade.Trade.buy_in_min30">
<code class="descname">buy_in_min30</code><span class="sig-paren">(</span><em>start</em>, <em>end</em>, <em>pre_low</em>, <em>typ</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.buy_in_min30"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.buy_in_min30" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="trade.Trade.buy_in_min30_s">
<em class="property">static </em><code class="descname">buy_in_min30_s</code><span class="sig-paren">(</span><em>low</em>, <em>high</em>, <em>pre_low</em>, <em>pre_high30</em>, <em>stamp</em>, <em>index</em>, <em>typ</em>, <em>price</em>, <em>account</em>, <em>pre_low30</em>, <em>num_h30</em>, <em>num_l30</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.buy_in_min30_s"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.buy_in_min30_s" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="trade.Trade.get_bs">
<code class="descname">get_bs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.get_bs"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.get_bs" title="永久链接至目标">¶</a></dt>
<dd><p>寻找买卖点主函数
:return:</p>
</dd></dl>

<dl class="method">
<dt id="trade.Trade.seek_to_buy">
<code class="descname">seek_to_buy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.seek_to_buy"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.seek_to_buy" title="永久链接至目标">¶</a></dt>
<dd><p>处理买入操作
:return: 是否发生买入操作</p>
</dd></dl>

<dl class="staticmethod">
<dt id="trade.Trade.seek_to_buy_s">
<em class="property">static </em><code class="descname">seek_to_buy_s</code><span class="sig-paren">(</span><em>pre_low</em>, <em>pre_high30</em>, <em>num_h30</em>, <em>num_l30</em>, <em>pre_low30</em>, <em>stamp</em>, <em>trend</em>, <em>pre_trend</em>, <em>index</em>, <em>account</em>, <em>high</em>, <em>low</em>, <em>price</em>, <em>last_bs_typ</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.seek_to_buy_s"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.seek_to_buy_s" title="永久链接至目标">¶</a></dt>
<dd><p>用于单步买点查找，必须有30min的高低点至少三个，高点在前；才能有效构成买入
:param pre_low: 点日线低点
:param pre_high30: 前30min高点
:param pre_low30: 前30min低点
:param stamp: 当前时间戳
:param trd: 当前趋势
:param index: 如果确认买点的编号
:param typ: 如果确认买点的类型
:param account: Account对象
:param high: 当前最高价
:param low: 当前最低价
:param price: 如果满足条件，以此价格买入
:param last_bs_typ: 上一个买卖操作的类型
:return:</p>
</dd></dl>

<dl class="method">
<dt id="trade.Trade.seek_to_sell">
<code class="descname">seek_to_sell</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/trade.html#Trade.seek_to_sell"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#trade.Trade.seek_to_sell" title="永久链接至目标">¶</a></dt>
<dd><p>此函数用于寻找卖点
:return:</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/trade.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Maggie Hu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/trade.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>